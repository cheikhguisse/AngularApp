<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <div class="register-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="8.5" cy="7" r="4"></circle>
          <line x1="20" y1="8" x2="20" y2="14"></line>
          <line x1="23" y1="11" x2="17" y2="11"></line>
        </svg>
      </div>
      <h1 class="register-title">Créer un compte</h1>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-group">
        <label for="name" class="form-label">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          Nom complet
        </label>
        <input
          id="name"
          type="text"
          formControlName="name"
          placeholder="John Doe"
          class="form-input"
          [class.error]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
        >
        <div class="error-messages">
          <small *ngIf="registerForm.get('name')?.errors?.['required'] && registerForm.get('name')?.touched">
            Le nom est requis
          </small>
        </div>
      </div>

      <div class="form-group">
        <label for="email" class="form-label">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          Adresse email
        </label>
        <input
          id="email"
          type="email"
          formControlName="email"
          placeholder="exemple@email.com"
          class="form-input"
          [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
        >
        <div class="error-messages">
          <small *ngIf="registerForm.get('email')?.errors?.['required'] && registerForm.get('email')?.touched">
            L'email est requis
          </small>
          <small *ngIf="registerForm.get('email')?.errors?.['email'] && registerForm.get('email')?.touched">
            Format d'email invalide
          </small>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label for="password" class="form-label">
            <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Mot de passe
          </label>
          <input
            id="password"
            type="password"
            formControlName="password"
            placeholder="••••••••"
            class="form-input"
            [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
          >
          <div class="error-messages">
            <small *ngIf="registerForm.get('password')?.errors?.['required'] && registerForm.get('password')?.touched">
              Le mot de passe est requis
            </small>
            <small *ngIf="registerForm.get('password')?.errors?.['minlength'] && registerForm.get('password')?.touched">
              Minimum 6 caractères requis
            </small>
          </div>
        </div>

        <div class="form-group half">
          <label for="confirmPassword" class="form-label">
            <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Confirmation
          </label>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            placeholder="••••••••"
            class="form-input"
            [class.error]="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched"
          >
          <div class="error-messages">
            <small *ngIf="registerForm.get('confirmPassword')?.errors?.['required'] && registerForm.get('confirmPassword')?.touched">
              La confirmation est requise
            </small>
            <small *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched">
              Les mots de passe ne correspondent pas
            </small>
          </div>
        </div>
      </div>

      <div class="password-strength" *ngIf="registerForm.get('password')?.value">
        <div class="strength-meter">
          <div class="strength-bar" [class]="getPasswordStrength()"></div>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="registerForm.invalid"
        class="submit-btn"
        [class.disabled]="registerForm.invalid"
      >
        <span *ngIf="!isLoading">Créer mon compte</span>
        <span *ngIf="isLoading" class="loading">
          <svg class="spinner" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 6v6l4 2"></path>
          </svg>
          Création en cours...
        </span>
      </button>
    </form>

    <div class="register-footer">
      <p class="divider">
        <span>Déjà inscrit ?</span>
      </p>
      <p class="login-link">
        <a routerLink="/login" class="login-btn">Se connecter à mon compte</a>
      </p>
    </div>
  </div>
</div>
